L 1				    ORG    $1800
L 2				;-----------------------------------------------------------------------
L 3				SysInitSbr:
L 4	[5]	1800	3F00		CLR	P0
L 5	[2]	1802	A604		LDA	#4
L 6	[4]	1804	B701		STA	DDR0    
L 7	[5]	1806	3F02	    	CLR	P0HCON
L 8	[5]	1808	3F03		CLR	P1
L 9	[2]	180A	A63F		LDA	#$3F
L 10	[4]	180C	B704		STA	DDR1
L 11	[5]	180E	3F05	    	CLR	P1HCON
L 12	[5]	1810	3F06		CLR	KBIM
L 13	[2]	1812	A663		LDA	#%01100011
L 14	[4]	1814	B712	    	STA 	ADCM        ;参考电压为Vdd
L 15					;---------------------------------------------------------------
L 16					;T0 2ms
L 17					;2M/2/16=16us 16us*125=2ms
L 18					;---------------------------------------------------------------
L 19	[2]	1816	A67D	    	LDA	#125    
L 20	[4]	1818	B707	    	STA	TLOAD0
L 21	[2]	181A	A618	    	LDA	#%00011000            ;64分频
L 22	[4]	181C	B708	    	STA	TCR0
L 23					;---------------------------------------------------------------
L 24					;T1 stop
L 25					;---------------------------------------------------------------
L 26	[4]	181E	B70A		STA    TLOAD1
L 27	[2]	1820	A601		LDA    #1
L 28	[4]	1822	B709		STA    TDATA1
L 29	[2]	1824	A644		LDA    #%01000100
L 30	[5]	1826	3F0B		CLR    TCR1
L 31					;T2 noused
L 32	[5]	1828	3F0D		CLR    TLOAD2H
L 33	[2]	182A	A601		LDA    #1
L 34	[4]	182C	B70F		STA    TLOAD2L
L 35	[2]	182E	A601		LDA    #1
L 36	[4]	1830	B70E		STA    TDATA2L
L 37	[5]	1832	3F0C		CLR    TDATA2H
L 38	[2]	1834	A654		LDA    #%01010100
L 39	[4]	1836	B710		STA    TCR2
L 40				
L 41	[5]	1838	3F11		CLR    INTC
L 42	[2]	183A	A640		LDA    #%01000000
L 43	[4]	183C	B716		STA    MCR
L 44				     
L 45					;RSTFR        EQU    $17
L 46				;-----------------------------------------------------------------------
L 47				SysInitRamSbr:
L 48				ram_clear:            
L 49	[2]	183E	AE71		LDX	#$71
L 50				ram_clear1:
L 51	[6]	1840	6F7F		CLR	$7F,X
L 52	[3]	1842	5A		DECX
L 53	[3]	1843	26FB		BNE	ram_clear1
L 54	[6]	1845	81		RTS
L 55				;-------------------------------------------------------------------
L 56				LEDAllOff:
L 57	[5]	1846	1B03		BCLR	pLED1
L 58	[5]	1848	1703		BCLR	pLED2
L 59	[5]	184A	1103		BCLR	pLED3
L 60	[5]	184C	1500		BCLR	pLED4
L 61	[6]	184E	81		RTS
L 62				
L 63				
